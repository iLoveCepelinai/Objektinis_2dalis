#include <iostream>
#include <string>
#include <iomanip>

using std::cout;
using std::cin;
using std::endl;
using std::string;


struct studentas{
    string vardas, pavard;
    double nd[10]; //float nes dirbant su int tipo duom ir gaunant ne sveikojo tipo atsakymus, galima sugadinti duomenis
    double egz;
    double galut;
};

int main()
{
    int n = 0;
    double m = 0;
    double vid = 0;
    cout << "Iveskite studentu skaiciu: ";
    cin >> n;
    while (!cin) {
        cout << "Jus ivedete klaidingus duomenis" << endl;
        cin.clear();
        cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
        cout << "Iveskite studentu skaiciu: ";
        cin >> n;
    }

    studentas *grupe = new studentas[n];//pirmose versijose nenaudoti const, nes nekompiliuoja

    for (int i = 0; i < n; i++) {
        cout << "Iveskite studento varda: "; cin >> grupe[i].vardas;
        
        cout << "Iveskite studento pavarde: "; cin >> grupe[i].pavard;
        
        cout << "Iveskite studento egzamino pazimi: "; cin >> grupe[i].egz;
        while (!cin || grupe[i].egz<1 || grupe[i].egz>10) {
            cout << "Jus ivedete klaidingus duomenis" << endl;
            cin.clear();
            cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
            cout << "Iveskite studento egzamino pazimi: ";
            cin >> grupe[i].egz;
        }
        cout << "Iveskite  studento namu darbu skaiciu: "; cin >> m;
        while (!cin || m <=0) {
            cout << "Jus ivedete klaidingus duomenis" << endl;
            cin.clear();
            cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
            cout << "Iveskite  studento namu darbu skaiciu: ";
            cin >> m;
        }
        for (int j = 0; j < m; j++) {
            cout << "Iveskite " << j+1 << "-aji namu darbu pazimi: "; cin >> grupe[i].nd[j];
            while (!cin || grupe[i].nd[j] < 1 || grupe[i].nd[j]>10) {
                cout << "Jus ivedete klaidingus duomenis" << endl;
                cin.clear();
                cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
                cout << "Iveskite " << j + 1 << "-aji namu darbu pazimi: ";
                cin >> grupe[i].nd[j];
            }
        }
        double suma = 0;
        int l = 0;
        while (l < m && grupe[i].nd[l]>0 && grupe[i].nd[l] <= 10) {
            suma = suma + grupe[i].nd[l];
            l++;
        }
        vid = suma / m;

        grupe[i].galut = 0.6 * grupe[i].egz + 0.4 * vid;
    }

    cout << "Pavarde\t\t" << "Vardas\t\t" << "Galutinis (vid.)" << endl;
    cout << "_____________________________________________" << endl;

    for (int k = 0; k < n; k++) {
        std::cout << std::fixed;
        std::cout << std::setprecision(2);
        cout << grupe[k].pavard << "\t\t" << grupe[k].vardas << "\t\t" << grupe[k].galut << endl;
    }

    return 0;
}
